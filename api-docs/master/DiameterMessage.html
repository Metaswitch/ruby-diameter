<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: DiameterMessage
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!DiameterMessage.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (D)</a> &raquo;
    
    
    <span class="title">DiameterMessage</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: DiameterMessage
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">DiameterMessage</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/diameter/message.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A Diameter message.</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#app_id-instance_method" title="#app_id (instance method)">- (Object) <strong>app_id</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute app_id.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#avps-instance_method" title="#avps (instance method)">- (Object) <strong>avps</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute avps.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#command_code-instance_method" title="#command_code (instance method)">- (Object) <strong>command_code</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute command_code.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ete-instance_method" title="#ete (instance method)">- (Object) <strong>ete</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute ete.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#hbh-instance_method" title="#hbh (instance method)">- (Object) <strong>hbh</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute hbh.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#request-instance_method" title="#request (instance method)">- (Object) <strong>request</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute request.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#version-instance_method" title="#version (instance method)">- (Object) <strong>version</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The Diameter protocol version (currenmtly always 1).</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_bytes-class_method" title="from_bytes (class method)">+ (DiameterMessage) <strong>from_bytes</strong>(bytes) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parses a byte representation (a 20-byte header plus AVPs) into a
DiameterMessage object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#length_from_header-class_method" title="length_from_header (class method)">+ (Fixnum) <strong>length_from_header</strong>(header) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parses the first four bytes of the Diameter header to learn the length.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_avps_by_code-instance_method" title="#all_avps_by_code (instance method)">- (Array&lt;AVP&gt;) <strong>all_avps_by_code</strong>(code, vendor = 0) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all AVPs with the given code and vendor.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_avps_by_name-instance_method" title="#all_avps_by_name (instance method)">- (Array&lt;AVP&gt;) <strong>all_avps_by_name</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all AVPs with the given name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#answer-instance_method" title="#answer (instance method)">- (true, false) <strong>answer</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if this message represents a Diameter answer (i.e. has the
&#39;Request&#39; bit in the header cleared).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#avp_by_code-instance_method" title="#avp_by_code (instance method)">- (AVP<sup>?</sup>) <strong>avp_by_code</strong>(code, vendor = 0) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the first AVP with the given code and vendor.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#avp_by_name-instance_method" title="#avp_by_name (instance method)">- (AVP<sup>?</sup>) <strong>avp_by_name</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the first AVP with the given name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_answer-instance_method" title="#create_answer (instance method)">- (DiameterMessage) <strong>create_answer</strong>(origin_host = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates an answer to this request, filling in appropriate fields per
<a href="http://tools.ietf.org/html/rfc6733#section-6.2" target="_parent" title="http://tools.ietf.org/html/rfc6733#section-6.2">http://tools.ietf.org/html/rfc6733#section-6.2</a>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DiameterMessage) <strong>initialize</strong>(options = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of DiameterMessage.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (String) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Represents this message (and all its AVPs) in human-readable string form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_wire-instance_method" title="#to_wire (instance method)">- (String) <strong>to_wire</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Serializes a Diameter message (header plus AVPs) into the series of bytes
representing it on the wire.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="DiameterMessage (class)">DiameterMessage</a></span></tt>) <strong>initialize</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of DiameterMessage</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14
15
16
17
18
19
20
21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 12</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@version</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:version</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>1</span>
  <span class='ivar'>@command_code</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:command_code</span><span class='rbracket'>]</span>
  <span class='ivar'>@avps</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:avps</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@app_id</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:app_id</span><span class='rbracket'>]</span>
  <span class='ivar'>@hbh</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:hbh</span><span class='rbracket'>]</span>
  <span class='ivar'>@ete</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ete</span><span class='rbracket'>]</span>

  <span class='ivar'>@request</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
  <span class='ivar'>@proxyable</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:proxyable</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
  <span class='ivar'>@retransmitted</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@error</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="app_id-instance_method">
  
    - (<tt>Object</tt>) <strong>app_id</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute app_id</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_app_id'>app_id</span>
  <span class='ivar'>@app_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="avps=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="avps-instance_method">
  
    - (<tt>Object</tt>) <strong>avps</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute avps</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 10</span>

<span class='kw'>def</span> <span class='id identifier rubyid_avps'>avps</span>
  <span class='ivar'>@avps</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="command_code-instance_method">
  
    - (<tt>Object</tt>) <strong>command_code</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute command_code</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_command_code'>command_code</span>
  <span class='ivar'>@command_code</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="ete-instance_method">
  
    - (<tt>Object</tt>) <strong>ete</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute ete</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ete'>ete</span>
  <span class='ivar'>@ete</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="hbh-instance_method">
  
    - (<tt>Object</tt>) <strong>hbh</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute hbh</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hbh'>hbh</span>
  <span class='ivar'>@hbh</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="request-instance_method">
  
    - (<tt>Object</tt>) <strong>request</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute request</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_request'>request</span>
  <span class='ivar'>@request</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="version-instance_method">
  
    - (<tt>Object</tt>) <strong>version</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The Diameter protocol version (currenmtly always 1)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 8</span>

<span class='kw'>class</span> <span class='const'>DiameterMessage</span>
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:version</span><span class='comma'>,</span> <span class='symbol'>:command_code</span><span class='comma'>,</span> <span class='symbol'>:app_id</span><span class='comma'>,</span> <span class='symbol'>:hbh</span><span class='comma'>,</span> <span class='symbol'>:ete</span><span class='comma'>,</span> <span class='symbol'>:request</span>
  <span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:avps</span>
  
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='ivar'>@version</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:version</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>1</span>
    <span class='ivar'>@command_code</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:command_code</span><span class='rbracket'>]</span>
    <span class='ivar'>@avps</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:avps</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@app_id</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:app_id</span><span class='rbracket'>]</span>
    <span class='ivar'>@hbh</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:hbh</span><span class='rbracket'>]</span>
    <span class='ivar'>@ete</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ete</span><span class='rbracket'>]</span>

    <span class='ivar'>@request</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
    <span class='ivar'>@proxyable</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:proxyable</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
    <span class='ivar'>@retransmitted</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@error</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># Returns true if this message represents a Diameter answer (i.e.
</span>  <span class='comment'># has the &#39;Request&#39; bit in the header cleared).
</span>  <span class='comment'>#
</span>  <span class='comment'># Always the opposite of {DiameterMessage#request}.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [true, false]
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_answer'>answer</span>
    <span class='op'>!</span><span class='ivar'>@request</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Represents this message (and all its AVPs) in human-readable
</span>  <span class='comment'># string form.
</span>  <span class='comment'>#
</span>  <span class='comment'># @see AVP::to_s for how the AVPs are represented.
</span>  <span class='comment'># @return [String]
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@command_code</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@avps</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Serializes a Diameter message (header plus AVPs) into the series
</span>  <span class='comment'># of bytes representing it on the wire.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] The byte-encoded form.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_to_wire'>to_wire</span>
    <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@avps</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_content'>content</span> <span class='op'>+=</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_to_wire'>to_wire</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_length_8'>length_8</span><span class='comma'>,</span> <span class='id identifier rubyid_length_16'>length_16</span> <span class='op'>=</span> <span class='const'>UInt24</span><span class='period'>.</span><span class='id identifier rubyid_to_u8_and_u16'>to_u8_and_u16</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='int'>20</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_code_8'>code_8</span><span class='comma'>,</span> <span class='id identifier rubyid_code_16'>code_16</span> <span class='op'>=</span> <span class='const'>UInt24</span><span class='period'>.</span><span class='id identifier rubyid_to_u8_and_u16'>to_u8_and_u16</span><span class='lparen'>(</span><span class='ivar'>@command_code</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_request_flag'>request_flag</span> <span class='op'>=</span> <span class='ivar'>@request</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_proxy_flag'>proxy_flag</span> <span class='op'>=</span> <span class='ivar'>@proxyable</span><span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_flags_str'>flags_str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_request_flag'>request_flag</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proxy_flag'>proxy_flag</span><span class='embexpr_end'>}</span><span class='tstring_content'>000000</span><span class='tstring_end'>&quot;</span></span>
    
    <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@version</span><span class='comma'>,</span> <span class='id identifier rubyid_length_8'>length_8</span><span class='comma'>,</span> <span class='id identifier rubyid_length_16'>length_16</span><span class='comma'>,</span> <span class='id identifier rubyid_flags_str'>flags_str</span><span class='comma'>,</span> <span class='id identifier rubyid_code_8'>code_8</span><span class='comma'>,</span> <span class='id identifier rubyid_code_16'>code_16</span><span class='comma'>,</span> <span class='ivar'>@app_id</span><span class='comma'>,</span> <span class='ivar'>@hbh</span><span class='comma'>,</span> <span class='ivar'>@ete</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CCnB8CnNNN</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_header'>header</span> <span class='op'>+</span> <span class='id identifier rubyid_content'>content</span>
  <span class='kw'>end</span>

  <span class='comment'># Returns the first AVP with the given name. Only covers &quot;top-level&quot;
</span>  <span class='comment'># AVPs - it won&#39;t look inside Grouped AVPs.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [AVP] if there is an AVP with that name
</span>  <span class='comment'># @return [nil] if there is not an AVP with that name
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_avp_by_name'>avp_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid__type'>_type</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span> <span class='op'>=</span> <span class='const'>AVPNames</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_avp_by_code'>avp_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Returns all AVPs with the given name. Only covers &quot;top-level&quot;
</span>  <span class='comment'># AVPs - it won&#39;t look inside Grouped AVPs.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Array&lt;AVP&gt;]
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_all_avps_by_name'>all_avps_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid__type'>_type</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span> <span class='op'>=</span> <span class='const'>AVPNames</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_all_avps_by_code'>all_avps_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Returns the first AVP with the given code and vendor. Only covers &quot;top-level&quot;
</span>  <span class='comment'># AVPs - it won&#39;t look inside Grouped AVPs.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [AVP] if there is an AVP with that code/vendor
</span>  <span class='comment'># @return [nil] if there is not an AVP with that code/vendor
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_avp_by_code'>avp_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='op'>=</span><span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_avps'>avps</span> <span class='op'>=</span> <span class='id identifier rubyid_all_avps_by_code'>all_avps_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_avps'>avps</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='kw'>nil</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_avps'>avps</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Returns all AVPs with the given code and vendor. Only covers &quot;top-level&quot;
</span>  <span class='comment'># AVPs - it won&#39;t look inside Grouped AVPs.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Array&lt;AVP&gt;]
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_all_avps_by_code'>all_avps_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='op'>=</span><span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_avps'>avps</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
      <span class='id identifier rubyid_vendor_match'>vendor_match</span> <span class='op'>=</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_vendor_specific?'>vendor_specific?</span>
          <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_vendor_id'>vendor_id</span> <span class='op'>==</span> <span class='id identifier rubyid_vendor'>vendor</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_vendor'>vendor</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='kw'>end</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span> <span class='op'>==</span> <span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id identifier rubyid_vendor_match'>vendor_match</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Parses the first four bytes of the Diameter header to learn the
</span>  <span class='comment'># length. Callers should use this to work out how many more bytes
</span>  <span class='comment'># they need to read off a TCP connection to pass to self.from_bytes.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param header [String] A four-byte Diameter header
</span>  <span class='comment'># @return [Fixnum] The message length field from the header
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_length_from_header'>length_from_header</span><span class='lparen'>(</span><span class='id identifier rubyid_header'>header</span><span class='rparen'>)</span>
    <span class='id identifier rubyid__version'>_version</span><span class='comma'>,</span> <span class='id identifier rubyid_length_8'>length_8</span><span class='comma'>,</span> <span class='id identifier rubyid_length_16'>length_16</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CCn</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='const'>UInt24</span><span class='period'>.</span><span class='id identifier rubyid_from_u8_and_u16'>from_u8_and_u16</span><span class='lparen'>(</span><span class='id identifier rubyid_length_8'>length_8</span><span class='comma'>,</span> <span class='id identifier rubyid_length_16'>length_16</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Parses a byte representation (a 20-byte header plus AVPs) into a
</span>  <span class='comment'># DiameterMessage object.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param bytes [String] The on-the-wire byte representation of a
</span>  <span class='comment'>#   Diameter message.
</span>  <span class='comment'># @return [DiameterMessage] The parsed object form.
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_from_bytes'>from_bytes</span><span class='lparen'>(</span><span class='id identifier rubyid_bytes'>bytes</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='id identifier rubyid_bytes'>bytes</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>20</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid__length_8'>_length_8</span><span class='comma'>,</span> <span class='id identifier rubyid__length_16'>_length_16</span><span class='comma'>,</span> <span class='id identifier rubyid_flags_str'>flags_str</span><span class='comma'>,</span> <span class='id identifier rubyid_code_8'>code_8</span><span class='comma'>,</span> <span class='id identifier rubyid_code_16'>code_16</span><span class='comma'>,</span> <span class='id identifier rubyid_app_id'>app_id</span><span class='comma'>,</span> <span class='id identifier rubyid_hbh'>hbh</span><span class='comma'>,</span> <span class='id identifier rubyid_ete'>ete</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CCnB8CnNNN</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_command_code'>command_code</span> <span class='op'>=</span> <span class='const'>UInt24</span><span class='period'>.</span><span class='id identifier rubyid_from_u8_and_u16'>from_u8_and_u16</span><span class='lparen'>(</span><span class='id identifier rubyid_code_8'>code_8</span><span class='comma'>,</span> <span class='id identifier rubyid_code_16'>code_16</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_request'>request</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_flags_str'>flags_str</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_proxyable'>proxyable</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_flags_str'>flags_str</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_avps'>avps</span> <span class='op'>=</span> <span class='const'>AVPParser</span><span class='op'>::</span><span class='id identifier rubyid_parse_avps_int'>parse_avps_int</span><span class='lparen'>(</span><span class='id identifier rubyid_bytes'>bytes</span><span class='lbracket'>[</span><span class='int'>20</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='const'>DiameterMessage</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>version:</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='label'>command_code:</span> <span class='id identifier rubyid_command_code'>command_code</span><span class='comma'>,</span> <span class='label'>app_id:</span> <span class='id identifier rubyid_app_id'>app_id</span><span class='comma'>,</span> <span class='label'>hbh:</span> <span class='id identifier rubyid_hbh'>hbh</span><span class='comma'>,</span> <span class='label'>ete:</span> <span class='id identifier rubyid_ete'>ete</span><span class='comma'>,</span> <span class='label'>request:</span> <span class='id identifier rubyid_request'>request</span><span class='comma'>,</span> <span class='label'>proxyable:</span> <span class='id identifier rubyid_proxyable'>proxyable</span><span class='comma'>,</span> <span class='label'>retransmitted:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>error:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>avps:</span> <span class='id identifier rubyid_avps'>avps</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Generates an answer to this request, filling in appropriate
</span>  <span class='comment'># fields per {http://tools.ietf.org/html/rfc6733#section-6.2}.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param origin_host [String] The Origin-Host to fill in on the
</span>  <span class='comment'>#   response.
</span>  <span class='comment'># @return [DiameterMessage] The response created.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_create_answer'>create_answer</span><span class='lparen'>(</span><span class='id identifier rubyid_origin_host'>origin_host</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='comment'># Is this a request?
</span>
    <span class='comment'># Copy the Session-Id and Proxy-Info
</span>
    <span class='comment'># Insert Origin-Host (should the stack do this?)
</span>
    <span class='comment'># Don&#39;t require or insert a Result-Code - we might want
</span>    <span class='comment'># Experimental-Result-Code instead
</span>
    <span class='const'>DiameterMessage</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>version:</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='label'>command_code:</span> <span class='id identifier rubyid_command_code'>command_code</span><span class='comma'>,</span> <span class='label'>app_id:</span> <span class='id identifier rubyid_app_id'>app_id</span><span class='comma'>,</span> <span class='label'>hbh:</span> <span class='id identifier rubyid_hbh'>hbh</span><span class='comma'>,</span> <span class='label'>ete:</span> <span class='id identifier rubyid_ete'>ete</span><span class='comma'>,</span> <span class='label'>request:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>proxyable:</span> <span class='ivar'>@proxyable</span><span class='comma'>,</span> <span class='label'>retransmitted:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>error:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="from_bytes-class_method">
  
    + (<tt><span class='object_link'><a href="" title="DiameterMessage (class)">DiameterMessage</a></span></tt>) <strong>from_bytes</strong>(bytes) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Parses a byte representation (a 20-byte header plus AVPs) into a
DiameterMessage object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>bytes</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The on-the-wire byte representation of a Diameter message.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="DiameterMessage (class)">DiameterMessage</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parsed object form.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130
131
132
133
134
135
136
137
138</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 128</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_from_bytes'>from_bytes</span><span class='lparen'>(</span><span class='id identifier rubyid_bytes'>bytes</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='id identifier rubyid_bytes'>bytes</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>20</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid__length_8'>_length_8</span><span class='comma'>,</span> <span class='id identifier rubyid__length_16'>_length_16</span><span class='comma'>,</span> <span class='id identifier rubyid_flags_str'>flags_str</span><span class='comma'>,</span> <span class='id identifier rubyid_code_8'>code_8</span><span class='comma'>,</span> <span class='id identifier rubyid_code_16'>code_16</span><span class='comma'>,</span> <span class='id identifier rubyid_app_id'>app_id</span><span class='comma'>,</span> <span class='id identifier rubyid_hbh'>hbh</span><span class='comma'>,</span> <span class='id identifier rubyid_ete'>ete</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CCnB8CnNNN</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_command_code'>command_code</span> <span class='op'>=</span> <span class='const'>UInt24</span><span class='period'>.</span><span class='id identifier rubyid_from_u8_and_u16'>from_u8_and_u16</span><span class='lparen'>(</span><span class='id identifier rubyid_code_8'>code_8</span><span class='comma'>,</span> <span class='id identifier rubyid_code_16'>code_16</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_request'>request</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_flags_str'>flags_str</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_proxyable'>proxyable</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_flags_str'>flags_str</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_avps'>avps</span> <span class='op'>=</span> <span class='const'>AVPParser</span><span class='op'>::</span><span class='id identifier rubyid_parse_avps_int'>parse_avps_int</span><span class='lparen'>(</span><span class='id identifier rubyid_bytes'>bytes</span><span class='lbracket'>[</span><span class='int'>20</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='const'>DiameterMessage</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>version:</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='label'>command_code:</span> <span class='id identifier rubyid_command_code'>command_code</span><span class='comma'>,</span> <span class='label'>app_id:</span> <span class='id identifier rubyid_app_id'>app_id</span><span class='comma'>,</span> <span class='label'>hbh:</span> <span class='id identifier rubyid_hbh'>hbh</span><span class='comma'>,</span> <span class='label'>ete:</span> <span class='id identifier rubyid_ete'>ete</span><span class='comma'>,</span> <span class='label'>request:</span> <span class='id identifier rubyid_request'>request</span><span class='comma'>,</span> <span class='label'>proxyable:</span> <span class='id identifier rubyid_proxyable'>proxyable</span><span class='comma'>,</span> <span class='label'>retransmitted:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>error:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>avps:</span> <span class='id identifier rubyid_avps'>avps</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="length_from_header-class_method">
  
    + (<tt>Fixnum</tt>) <strong>length_from_header</strong>(header) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Parses the first four bytes of the Diameter header to learn the length.
Callers should use this to work out how many more bytes they need to read
off a TCP connection to pass to self.from_bytes.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>header</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A four-byte Diameter header</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The message length field from the header</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 117</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_length_from_header'>length_from_header</span><span class='lparen'>(</span><span class='id identifier rubyid_header'>header</span><span class='rparen'>)</span>
  <span class='id identifier rubyid__version'>_version</span><span class='comma'>,</span> <span class='id identifier rubyid_length_8'>length_8</span><span class='comma'>,</span> <span class='id identifier rubyid_length_16'>length_16</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CCn</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>UInt24</span><span class='period'>.</span><span class='id identifier rubyid_from_u8_and_u16'>from_u8_and_u16</span><span class='lparen'>(</span><span class='id identifier rubyid_length_8'>length_8</span><span class='comma'>,</span> <span class='id identifier rubyid_length_16'>length_16</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="all_avps_by_code-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="AVP.html" title="AVP (class)">AVP</a></span>&gt;</tt>) <strong>all_avps_by_code</strong>(code, vendor = 0) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns all AVPs with the given code and vendor. Only covers “top-level”
AVPs - it won&#39;t look inside Grouped AVPs.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="AVP.html" title="AVP (class)">AVP</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103
104
105
106
107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 99</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_avps_by_code'>all_avps_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='op'>=</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_avps'>avps</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
    <span class='id identifier rubyid_vendor_match'>vendor_match</span> <span class='op'>=</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_vendor_specific?'>vendor_specific?</span>
        <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_vendor_id'>vendor_id</span> <span class='op'>==</span> <span class='id identifier rubyid_vendor'>vendor</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_vendor'>vendor</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='kw'>end</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span> <span class='op'>==</span> <span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id identifier rubyid_vendor_match'>vendor_match</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_avps_by_name-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="AVP.html" title="AVP (class)">AVP</a></span>&gt;</tt>) <strong>all_avps_by_name</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns all AVPs with the given name. Only covers “top-level” AVPs - it
won&#39;t look inside Grouped AVPs.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="AVP.html" title="AVP (class)">AVP</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_avps_by_name'>all_avps_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid__type'>_type</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span> <span class='op'>=</span> <span class='const'>AVPNames</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_all_avps_by_code'>all_avps_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="answer-instance_method">
  
    - (<tt>true</tt>, <tt>false</tt>) <strong>answer</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if this message represents a Diameter answer (i.e. has the
&#39;Request&#39; bit in the header cleared).</p>

<p>Always the opposite of <span class='object_link'><a href="#request-instance_method" title="DiameterMessage#request (method)">#request</a></span>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_answer'>answer</span>
  <span class='op'>!</span><span class='ivar'>@request</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="avp_by_code-instance_method">
  
    - (<tt><span class='object_link'><a href="AVP.html" title="AVP (class)">AVP</a></span></tt><sup>?</sup>) <strong>avp_by_code</strong>(code, vendor = 0) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the first AVP with the given code and vendor. Only covers
“top-level” AVPs - it won&#39;t look inside Grouped AVPs.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="AVP.html" title="AVP (class)">AVP</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if there is an AVP with that code/vendor</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if there is not an AVP with that code/vendor</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_avp_by_code'>avp_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='op'>=</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_avps'>avps</span> <span class='op'>=</span> <span class='id identifier rubyid_all_avps_by_code'>all_avps_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_avps'>avps</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_avps'>avps</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="avp_by_name-instance_method">
  
    - (<tt><span class='object_link'><a href="AVP.html" title="AVP (class)">AVP</a></span></tt><sup>?</sup>) <strong>avp_by_name</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the first AVP with the given name. Only covers “top-level” AVPs -
it won&#39;t look inside Grouped AVPs.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="AVP.html" title="AVP (class)">AVP</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if there is an AVP with that name</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if there is not an AVP with that name</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 67</span>

<span class='kw'>def</span> <span class='id identifier rubyid_avp_by_name'>avp_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid__type'>_type</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span> <span class='op'>=</span> <span class='const'>AVPNames</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_avp_by_code'>avp_by_code</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor'>vendor</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_answer-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="DiameterMessage (class)">DiameterMessage</a></span></tt>) <strong>create_answer</strong>(origin_host = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generates an answer to this request, filling in appropriate fields per
<a href="http://tools.ietf.org/html/rfc6733#section-6.2" target="_parent" title="http://tools.ietf.org/html/rfc6733#section-6.2">http://tools.ietf.org/html/rfc6733#section-6.2</a>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>origin_host</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The Origin-Host to fill in on the response.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="DiameterMessage (class)">DiameterMessage</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The response created.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148
149
150
151
152
153
154
155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 146</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_answer'>create_answer</span><span class='lparen'>(</span><span class='id identifier rubyid_origin_host'>origin_host</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='comment'># Is this a request?
</span>
  <span class='comment'># Copy the Session-Id and Proxy-Info
</span>
  <span class='comment'># Insert Origin-Host (should the stack do this?)
</span>
  <span class='comment'># Don&#39;t require or insert a Result-Code - we might want
</span>  <span class='comment'># Experimental-Result-Code instead
</span>
  <span class='const'>DiameterMessage</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>version:</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='label'>command_code:</span> <span class='id identifier rubyid_command_code'>command_code</span><span class='comma'>,</span> <span class='label'>app_id:</span> <span class='id identifier rubyid_app_id'>app_id</span><span class='comma'>,</span> <span class='label'>hbh:</span> <span class='id identifier rubyid_hbh'>hbh</span><span class='comma'>,</span> <span class='label'>ete:</span> <span class='id identifier rubyid_ete'>ete</span><span class='comma'>,</span> <span class='label'>request:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>proxyable:</span> <span class='ivar'>@proxyable</span><span class='comma'>,</span> <span class='label'>retransmitted:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>error:</span> <span class='kw'>false</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    - (<tt>String</tt>) <strong>to_s</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Represents this message (and all its AVPs) in human-readable string form.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>for how the AVPs are represented.</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@command_code</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@avps</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_wire-instance_method">
  
    - (<tt>String</tt>) <strong>to_wire</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Serializes a Diameter message (header plus AVPs) into the series of bytes
representing it on the wire.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The byte-encoded form.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53
54
55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/diameter/message.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_wire'>to_wire</span>
  <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@avps</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_content'>content</span> <span class='op'>+=</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_to_wire'>to_wire</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_length_8'>length_8</span><span class='comma'>,</span> <span class='id identifier rubyid_length_16'>length_16</span> <span class='op'>=</span> <span class='const'>UInt24</span><span class='period'>.</span><span class='id identifier rubyid_to_u8_and_u16'>to_u8_and_u16</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='int'>20</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_code_8'>code_8</span><span class='comma'>,</span> <span class='id identifier rubyid_code_16'>code_16</span> <span class='op'>=</span> <span class='const'>UInt24</span><span class='period'>.</span><span class='id identifier rubyid_to_u8_and_u16'>to_u8_and_u16</span><span class='lparen'>(</span><span class='ivar'>@command_code</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_request_flag'>request_flag</span> <span class='op'>=</span> <span class='ivar'>@request</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_proxy_flag'>proxy_flag</span> <span class='op'>=</span> <span class='ivar'>@proxyable</span><span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_flags_str'>flags_str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_request_flag'>request_flag</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proxy_flag'>proxy_flag</span><span class='embexpr_end'>}</span><span class='tstring_content'>000000</span><span class='tstring_end'>&quot;</span></span>
  
  <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@version</span><span class='comma'>,</span> <span class='id identifier rubyid_length_8'>length_8</span><span class='comma'>,</span> <span class='id identifier rubyid_length_16'>length_16</span><span class='comma'>,</span> <span class='id identifier rubyid_flags_str'>flags_str</span><span class='comma'>,</span> <span class='id identifier rubyid_code_8'>code_8</span><span class='comma'>,</span> <span class='id identifier rubyid_code_16'>code_16</span><span class='comma'>,</span> <span class='ivar'>@app_id</span><span class='comma'>,</span> <span class='ivar'>@hbh</span><span class='comma'>,</span> <span class='ivar'>@ete</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CCnB8CnNNN</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_header'>header</span> <span class='op'>+</span> <span class='id identifier rubyid_content'>content</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sun Dec  7 13:48:34 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.0.0).
</div>

  </body>
</html>